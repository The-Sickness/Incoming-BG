name: Package AddOn

on:
  push:
    branches:
      - main  # Ensure this matches the branch name you use

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Setup Environment
      run: |
        sudo apt-get update
        sudo apt-get install -y lua5.3

    - name: Install Packager
      run: |
        wget -O release.sh https://raw.githubusercontent.com/BigWigsMods/packager/master/release.sh
        chmod +x release.sh

    - name: Package AddOn
      run: ./release.sh -d -z

    - name: Upload Artifacts
      uses: actions/upload-artifact@v2
      with:
        name: packaged-addon
        path: ./releases

      with:
        name: packaged-addon
        path: ./releases
